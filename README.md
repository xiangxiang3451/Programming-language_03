## Локальный чатик

------

> Это приложение для локального чата, разработанное на основе языка Go, поддерживает протокол TCP и может работать как сервер или клиент. Приложение реализует следующие функции:

1. Клиент может подключиться к серверу, указав IP-адрес и порт.
2. При первом подключении клиент отправляет свой никнейм, который будет сохранён на сервере.
3. Поддерживается отправка зашифрованных личных сообщений конкретному пользователю.
4. Поддерживается широковещательная отправка обычных сообщений всем подключённым пользователям (без шифрования).
5. Для шифрования сообщений используется пара ключей Ed25519, которая генерируется каждым клиентом при подключении.
6. Сервер отвечает за маршрутизацию сообщений и проверку их шифрования.

#### Способы запуска

Программа поддерживает два режима работы: серверный и клиентский.

- ##### Режим сервера

Для запуска сервера используйте параметр `server <port>`.

Пример:

```bash
go run main.go server 8080
```

- ##### Клиентский режим

Для запуска клиента используйте параметр `client <server IP:port> <nickname>`.

Пример:

```bash
go run main.go client 127.0.0.1:8080 Chang
```

#### Описание функциональности

##### Формат сообщений

- **Широковещательные сообщения**: Введите текст сообщения и отправьте. Сервер перенаправит его всем подключённым пользователям.
- **Личные сообщения**: Начните сообщение с `@nickname`, затем добавьте текст. Сервер зашифрует сообщение и отправит указанному пользователю.

##### Шифрование

- Для реализации сквозного шифрования используется алгоритм Ed25519.
- При подключении клиента генерируется пара ключей (открытый и закрытый). Открытый ключ передаётся через сообщение целевому пользователю.
- При отправке личных сообщений содержимое включает открытый ключ отправителя и подпись. Получатель проверяет подпись для обеспечения подлинности сообщения.

##### Широковещательная отправка

- Сообщения, отправленные без указания конкретного получателя, транслируются всем подключённым пользователям без шифрования.

#### Примеры

Запуск сервера:

```bash
go run main.go server 8080	 
```

Запуск клиента 1:

```bash
go run main.go client 127.0.0.1:8080 Li
```

Запуск клиента 2:

```bash
go run main.go client 127.0.0.1:8080 Chang
```

Отправка сообщений:

> **Li отправляет зашифрованное сообщение Chang**

![](https://gitee.com/xiangxiang3451/pictures/blob/master/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-01-07%20225522.png)

![](https://gitee.com/xiangxiang3451/pictures/blob/master/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-01-07%20225546.png)

> **Li отправляет широковещательное сообщение**

![](https://gitee.com/xiangxiang3451/pictures/blob/master/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-01-07%20224510.png)

![](https://gitee.com/xiangxiang3451/pictures/blob/master/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-01-07%20224548.png)